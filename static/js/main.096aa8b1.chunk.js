(this["webpackJsonpcart-redux"]=this["webpackJsonpcart-redux"]||[]).push([[0],{50:function(t,e,n){t.exports=n(78)},78:function(t,e,n){"use strict";n.r(e);var r,a,c=n(0),o=n.n(c),u=n(20),l=n.n(u),i=n(17),d=n(22),p=n(11),s=n(12),m=Object(s.a)(r||(r=Object(p.a)(["\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    outline: 0;\n  }\n  body {\n    background: #ffffff;\n    color: #000000;\n    -webkit-font-smoothing: antialiased;\n  }\n  body, input, button {\n    font-family: 'Poppins', serif;\n    font-size: 1rem;\n  }\n  h1, h2, h3, h4, h5, h6, strong {\n    font-weight: 500;\n  }\n  button {\n    cursor: pointer;\n  }\n"]))),b=n(13),f=n(43),x=n(48),E=n(44);!function(t){t.addProductToCartRequest="ADD_PRODUCT_TO_CART_REQUEST",t.addProductToCartSuccess="ADD_PRODUCT_TO_CART_SUCCESS",t.addProductToCartFailure="ADD_PRODUCT_TO_CART_FAILURE"}(a||(a={}));var g={items:[],failedStockCheck:[]},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0;return Object(E.a)(t,(function(t){switch(e.type){case a.addProductToCartSuccess:var n=e.payload.product,r=t.items.findIndex((function(t){return t.product.id===n.id}));r>=0?t.items[r].quantity+=1:t.items.push({product:n,quantity:1});break;case a.addProductToCartFailure:t.failedStockCheck.push(e.payload.productId)}}))},h=Object(b.combineReducers)({cart:y}),O=n(19),j=n.n(O),k=n(14);function v(t){return{type:a.addProductToCartSuccess,payload:{product:t}}}var C=n(45),R=n.n(C).a.create({baseURL:"http://localhost:3333"}),T=j.a.mark(P);function P(t){var e,n,r;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e=t.payload,n=e.product,c.next=4,Object(k.d)((function(t){var e,r;return null!==(e=null===(r=t.cart.items.find((function(t){return t.product.id===n.id})))||void 0===r?void 0:r.quantity)&&void 0!==e?e:0}));case 4:return r=c.sent,c.next=7,Object(k.b)(R.get,"stock/".concat(n.id));case 7:if(!(c.sent.data.quantity>r)){c.next=13;break}return c.next=11,Object(k.c)(v(n));case 11:c.next=15;break;case 13:return c.next=15,Object(k.c)((o=n.id,{type:a.addProductToCartFailure,payload:{productId:o}}));case 15:case"end":return c.stop()}var o}),T)}var w=Object(k.a)([Object(k.e)(a.addProductToCartRequest,P)]),S=j.a.mark(_);function _(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)([w]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),S)}var D=Object(x.a)(),q=[D],I=Object(b.createStore)(h,Object(f.composeWithDevTools)(b.applyMiddleware.apply(void 0,q)));D.run(_);var A,B,F,U,N,L=I,z=n(5),J=n(49),M=function(t){var e=t.component,n=Object(J.a)(t,["component"]);return o.a.createElement(z.a,Object.assign({},n,{render:function(){return o.a.createElement(e,null)}}))},Q=n(47),$=s.b.article(A||(A=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 8px;\n  box-shadow: 2px 2px 11px 1px rgba(0, 0, 0, 0.2);\n\n  img {\n    width: 150px;\n    height: 150px;\n  }\n\n  strong {\n    margin-top: 10px;\n  }\n\n  button {\n    background-color: rgba(0, 0, 0, 0.1);\n    border: none;\n    padding: 5px 10px;\n    margin-top: 10px;\n  }\n\n  .out-of-stock {\n    color: grey;\n    font-style: italic;\n  }\n"]))),V=function(t){var e=t.product,n=Object(i.b)(),r=Object(i.c)((function(t){return t.cart.failedStockCheck.includes(e.id)})),u=Object(c.useCallback)((function(){n(function(t){return{type:a.addProductToCartRequest,payload:{product:t}}}(e))}),[n,e]);return o.a.createElement($,null,o.a.createElement("img",{src:e.image_url,alt:"product"}),o.a.createElement("strong",{className:"title"},e.title),r?o.a.createElement("strong",{className:"out-of-stock"},"Out of stock"):o.a.createElement("strong",{className:"price"},Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.price)),o.a.createElement("button",{type:"button",onClick:u},"Comprar"))},W=s.b.main(B||(B=Object(p.a)(["\n  display: grid;\n  grid-template-columns: 200px 200px 200px;\n  grid-gap: 15px;\n"]))),G=function(){var t=Object(c.useState)([]),e=Object(Q.a)(t,2),n=e[0],r=e[1];return Object(c.useEffect)((function(){R.get("products").then((function(t){r(t.data)}))}),[]),o.a.createElement(W,null,n.map((function(t){return o.a.createElement(V,{key:t.id,product:t})})))},H=s.b.table(F||(F=Object(p.a)(["\n  width: 630px;\n  box-shadow: 2px 2px 11px 1px rgba(0, 0, 0, 0.2);\n  border-spacing: 0;\n\n  th,\n  td {\n    padding: 8px;\n    text-align: start;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n  }\n"]))),K=function(){var t=Object(i.c)((function(t){return t.cart.items}));return o.a.createElement(H,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Produto"),o.a.createElement("th",null,"Pre\xe7o"),o.a.createElement("th",null,"Quantidade"),o.a.createElement("th",null,"Subtotal"))),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"TV 4k"),o.a.createElement("td",null,"R$ 900,00"),o.a.createElement("td",null,"1"),o.a.createElement("td",null,"R$ 900,00")),t.map((function(t){return o.a.createElement("tr",{key:t.product.id},o.a.createElement("td",null,t.product.title),o.a.createElement("td",null,Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.product.price)),o.a.createElement("td",null,t.quantity),o.a.createElement("td",null,Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.quantity*t.product.price)))}))))},X=s.b.div(U||(U=Object(p.a)(["\n  padding: 40px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Y=s.b.h2(N||(N=Object(p.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]))),Z=function(){return o.a.createElement(X,null,o.a.createElement(Y,null,"Catalogo de produtos"),o.a.createElement(G,null),o.a.createElement(Y,null,"Carrinho"),o.a.createElement(K,null))},tt=function(){return o.a.createElement(z.c,null,o.a.createElement(M,{path:"/",component:Z}))},et=function(){return o.a.createElement(i.a,{store:L},o.a.createElement(d.a,null,o.a.createElement(tt,null),o.a.createElement(m,null)))};l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(et,null)),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.096aa8b1.chunk.js.map